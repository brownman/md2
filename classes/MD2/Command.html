<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: MD2::Command</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">MD2::Command</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/md2/command_rb.html">
                lib/md2/command.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
This class is instantiated from the C extension. You shouldn&#8216;t have
to instantiate it directly.
</p>
<p>
GL Commands are an optimization technique employed by <a
href="../MD2.html">MD2</a> files to improve render time. The <a
href="../MD2.html">MD2</a> file contains a span of bytes equal to the
MD2::Header#gl_command_count. Those bytes in turn have the following
format:
</p>
<pre>
  1. How many bytes follow for a single GL command. This is an integer, so the data need to be
     cast into an integer in order to be processed.

     This byte also indicates the render method for this GL command: if it's positive,
     this is a triangle strip; if it's negative, a triangle fan. If zero, this byte
     represents the end of the command list. Terminating bytes are silently omitted
     by this Ruby library.
  2. The horizontal texture coordinate. This is a float, so the data needs to be cast into a
     float to be processed.
  3. The vertical texture coordinate. This is a float, so the data needs to be cast into a
     float to be processed.
  4. The vertex index to be rendered. This is an integer, so the data needs to be cast into
     an integer to be processed.
</pre>
<p>
As the data are cast into the necessary types, the boundaries of any given
command structure must be adjusted to match. I was not able to find a way
to do this using pure Ruby, so the bulk of the above algorithm is
implemented in this gem&#8216;s C extension.
</p>
<p>
This class is only instantiated after the fact, with the data already
deserialized.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000004">new</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">

    <div id="class-list">
      <h3 class="section-bar">Classes and Modules</h3>

      Class <a href="Command/Segment.html" class="link">MD2::Command::Segment</a><br />

    </div>




    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">segments</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
an array of segments, each an instance of <a
href="Command/Segment.html">MD2::Command::Segment</a>. Segments contain the
vertex and texture data for this command.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">type</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
The type of command. This is equal to either :triangle_strip or
:triangle_fan.

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000004" class="method-detail">
        <a name="M000004"></a>

        <div class="method-heading">
          <a href="#M000004" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments are expected to be a single array with the following content:
</p>
<pre>
  [ (:triangle_strip|:triangle_fan), *elements ]
</pre>
<p>
The remainder of the elements are expected to appear in this order:
</p>
<pre>
  (s_coord, t_coord, vert_index)
</pre>
<p>
So, the elements are expected to be in groups of 3: the s and t texture
coordinates (which are Floats), and the vertex index (which is a Fixnum).
</p>
<p>
The array of args is expected to be a single, flat array &#8212; the data
should not be nested into other arrays.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000004-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000004-source">
<pre>
<span class="ruby-comment cmt"># File lib/md2/command.rb, line 55</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">args</span>)
    <span class="ruby-ivar">@type</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>
    <span class="ruby-ivar">@segments</span> = []
    
    <span class="ruby-value">0</span>.<span class="ruby-identifier">step</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>, <span class="ruby-value">3</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
      <span class="ruby-ivar">@segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">MD2</span><span class="ruby-operator">::</span><span class="ruby-constant">Command</span><span class="ruby-operator">::</span><span class="ruby-constant">Segment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">args</span>[<span class="ruby-identifier">index</span>], <span class="ruby-identifier">args</span>[<span class="ruby-identifier">index</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>], <span class="ruby-identifier">args</span>[<span class="ruby-identifier">index</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>])
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>